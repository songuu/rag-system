# Ollama æ¨¡å‹ç®¡ç†ç³»ç»Ÿå®Œæ•´æŒ‡å—

## ä¸€ã€ç³»ç»Ÿæ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„ Ollama æ¨¡å‹ç®¡ç†è§£å†³æ–¹æ¡ˆï¼Œæä¾›ï¼š
- **è‡ªåŠ¨æ£€æµ‹** æœ¬åœ°å®‰è£…çš„æ‰€æœ‰ Ollama æ¨¡å‹
- **æ™ºèƒ½åˆ†ç±»** LLM æ¨¡å‹ vs Embedding æ¨¡å‹
- **åŠ¨æ€é€‰æ‹©** æ— éœ€ç¡¬ç¼–ç æ¨¡å‹åˆ—è¡¨
- **çŠ¶æ€ç®¡ç†** å®æ—¶æ£€æŸ¥æœåŠ¡å’Œæ¨¡å‹çŠ¶æ€
- **å®‰è£…æŒ‡å¼•** æä¾›æ¸…æ™°çš„å®‰è£…æ­¥éª¤å’Œå»ºè®®

## äºŒã€åŠŸèƒ½ç‰¹æ€§

### 2.1 æ ¸å¿ƒåŠŸèƒ½

| åŠŸèƒ½ | æè¿° |
|------|------|
| ğŸ” è‡ªåŠ¨æ£€æµ‹ | å®æ—¶è¯»å– Ollama API çš„æ¨¡å‹åˆ—è¡¨ |
| ğŸ·ï¸ æ™ºèƒ½åˆ†ç±» | è‡ªåŠ¨è¯†åˆ« LLM å’Œ Embedding æ¨¡å‹ |
| âœ… çŠ¶æ€æ£€æŸ¥ | Ollama åœ¨çº¿/ç¦»çº¿ï¼Œæ¨¡å‹æ˜¯å¦å°±ç»ª |
| ğŸ’¾ åŠ¨æ€é€‰æ‹© | ç”¨æˆ·å¯ä»å®é™…å®‰è£…çš„æ¨¡å‹ä¸­é€‰æ‹© |
| ğŸ“‹ æ¨èæ¨¡å‹ | æä¾›ç»è¿‡éªŒè¯çš„æ¨¡å‹æ¨èåˆ—è¡¨ |
| ğŸ› ï¸ å®‰è£…å‘å¯¼ | ä¸€é”®å¤åˆ¶å®‰è£…å‘½ä»¤ |
| ğŸ”„ å®æ—¶åˆ·æ–° | å®‰è£…åç«‹å³æ£€æµ‹æ–°æ¨¡å‹ |

### 2.2 ç”¨æˆ·ä½“éªŒ

```
åœºæ™¯ 1: Ollama æœªè¿è¡Œ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸  Ollama æœåŠ¡æœªè¿è¡Œ             â”‚
â”‚                                    â”‚
â”‚ å¯åŠ¨æ­¥éª¤ï¼š                         â”‚
â”‚ 1. æ‰“å¼€ç»ˆç«¯                        â”‚
â”‚ 2. è¿è¡Œ: ollama serve             â”‚
â”‚ 3. ç­‰å¾…å¯åŠ¨                        â”‚
â”‚ 4. åˆ·æ–°æ­¤é¡µé¢                      â”‚
â”‚                                    â”‚
â”‚ [é‡æ–°æ£€æµ‹]  [ä¸‹è½½ Ollama]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åœºæ™¯ 2: æ— å·²å®‰è£…æ¨¡å‹
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸  æœªæ£€æµ‹åˆ°å·²å®‰è£…çš„æ¨¡å‹          â”‚
â”‚                                    â”‚
â”‚ æ¨èå®‰è£…ç»„åˆï¼š                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Llama 3.1                     â”‚ â”‚
â”‚ â”‚ LLM æ¨¡å‹ Â· 4.7 GB             â”‚ â”‚
â”‚ â”‚                [å¤åˆ¶å®‰è£…å‘½ä»¤]  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Nomic Embed Text              â”‚ â”‚
â”‚ â”‚ Embedding æ¨¡å‹ Â· 274 MB       â”‚ â”‚
â”‚ â”‚                [å¤åˆ¶å®‰è£…å‘½ä»¤]  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚
â”‚ [åˆ·æ–°æ£€æµ‹]                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åœºæ™¯ 3: æ­£å¸¸ä½¿ç”¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… ç³»ç»Ÿå°±ç»ª                       â”‚
â”‚ LLM: 3 ä¸ª | Embedding: 2 ä¸ª       â”‚
â”‚                                    â”‚
â”‚ [å·²å®‰è£…æ¨¡å‹] [æ¨èæ¨¡å‹]            â”‚
â”‚                                    â”‚
â”‚ ğŸ¤– LLM æ¨¡å‹ (3)                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚ â”‚ Llama 3 â”‚ â”‚ Qwen2.5 â”‚  ...      â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                    â”‚
â”‚ ğŸ§¬ Embedding æ¨¡å‹ (2)             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚ â”‚ Nomic    â”‚ â”‚ MxBAI  â”‚           â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ä¸‰ã€æŠ€æœ¯å®ç°

### 3.1 æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        React å‰ç«¯ç»„ä»¶                   â”‚
â”‚  (ModelManagementPanel.tsx)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ HTTP Request
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Next.js API Routes               â”‚
â”‚   (/api/ollama/models/route.ts)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ HTTP Request
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Ollama HTTP API                  â”‚
â”‚   (http://localhost:11434)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 API ç«¯ç‚¹

#### GET /api/ollama/models

**åŠŸèƒ½**: è·å–æ‰€æœ‰æœ¬åœ°æ¨¡å‹

**è¿”å›ç¤ºä¾‹**:
```json
{
  "success": true,
  "hasModels": true,
  "llmModels": [
    {
      "name": "llama3.1:latest",
      "displayName": "llama3.1",
      "tag": "latest",
      "size": 5018570368,
      "sizeFormatted": "4.67 GB",
      "category": "llm",
      "modifiedAt": "2026-01-14T..."
    }
  ],
  "embeddingModels": [
    {
      "name": "nomic-embed-text:latest",
      "displayName": "nomic-embed-text",
      "tag": "latest",
      "size": 274301184,
      "sizeFormatted": "261.52 MB",
      "category": "embedding",
      "modifiedAt": "2026-01-14T..."
    }
  ],
  "count": {
    "total": 2,
    "llm": 1,
    "embedding": 1,
    "unknown": 0
  },
  "recommended": {
    "llm": [...],
    "embedding": [...]
  },
  "status": {
    "hasRecommendedLLM": true,
    "hasRecommendedEmbedding": true,
    "ready": true
  },
  "warnings": []
}
```

**é”™è¯¯åœºæ™¯ - Ollama ç¦»çº¿**:
```json
{
  "success": false,
  "error": "Ollama æœåŠ¡æœªè¿è¡Œ",
  "code": "OLLAMA_OFFLINE",
  "suggestion": "è¯·å…ˆå¯åŠ¨ Ollama æœåŠ¡: ollama serve"
}
```

**åœºæ™¯ - æ— æ¨¡å‹**:
```json
{
  "success": true,
  "hasModels": false,
  "llmModels": [],
  "embeddingModels": [],
  "recommended": {...},
  "message": "æœªæ£€æµ‹åˆ°å·²å®‰è£…çš„æ¨¡å‹",
  "suggestion": "è¯·å®‰è£…æ¨èçš„æ¨¡å‹"
}
```

### 3.3 æ¨¡å‹åˆ†ç±»ç®—æ³•

```typescript
function categorizeModel(modelName: string): 'llm' | 'embedding' | 'unknown' {
  const nameLower = modelName.toLowerCase();
  
  // 1. ä¼˜å…ˆæ£€æŸ¥æ˜ç¡®çš„ embedding æ¨¡å‹
  const embeddingKeywords = [
    'embed', 'embedding', 'bge', 'gte', 'jina', 'e5',
    'nomic-embed', 'mxbai-embed', 'snowflake-arctic-embed'
  ];
  
  if (embeddingKeywords.some(kw => nameLower.includes(kw))) {
    return 'embedding';
  }
  
  // 2. æ’é™¤åŒ…å« embed çš„é LLM æ¨¡å‹
  if (nameLower.includes('embed')) {
    return 'unknown';
  }
  
  // 3. æ£€æŸ¥ LLM æ¨¡å‹å…³é”®è¯
  const llmKeywords = [
    'llama', 'mistral', 'mixtral', 'gemma', 'phi', 'qwen',
    'deepseek', 'yi', 'solar', 'vicuna', 'orca', 'starling'
  ];
  
  if (llmKeywords.some(kw => nameLower.includes(kw))) {
    return 'llm';
  }
  
  return 'unknown';
}
```

### 3.4 æ¨èæ¨¡å‹åˆ—è¡¨

**LLM æ¨¡å‹æ¨è**:

| æ¨¡å‹ | å¤§å° | ä¸Šä¸‹æ–‡é•¿åº¦ | ç‰¹ç‚¹ | æ¨èåº¦ |
|------|------|------------|------|--------|
| llama3.1 | 4.7 GB | 128K tokens | ç»¼åˆæ€§èƒ½æœ€ä½³ | â­â­â­â­â­ |
| llama3.2 | 2.0 GB | 128K tokens | æ›´å¿«æ›´è½»é‡ | â­â­â­â­â­ |
| qwen2.5 | 4.4 GB | 32K tokens | ä¸­æ–‡ä¼˜åŒ– | â­â­â­â­â­ |
| mistral | 4.1 GB | 32K tokens | æ¬§æ´²å¼€æº | â­â­â­â­ |
| gemma2 | 5.4 GB | 8K tokens | Google å‡ºå“ | â­â­â­ |

**Embedding æ¨¡å‹æ¨è**:

| æ¨¡å‹ | å¤§å° | ç»´åº¦ | ç‰¹ç‚¹ | æ¨èåº¦ |
|------|------|------|------|--------|
| nomic-embed-text | 274 MB | 768 | è‹±æ–‡æœ€ä½³ | â­â­â­â­â­ |
| mxbai-embed-large | 669 MB | 1024 | é«˜ç²¾åº¦ | â­â­â­â­â­ |
| bge-large | 1.3 GB | 1024 | ä¸­è‹±åŒè¯­ | â­â­â­â­ |
| snowflake-arctic-embed | 669 MB | 1024 | å¤šè¯­è¨€ | â­â­â­â­ |

## å››ã€ä½¿ç”¨æŒ‡å—

### 4.1 é¦–æ¬¡ä½¿ç”¨

**æ­¥éª¤ 1: å®‰è£… Ollama**

```bash
# macOS
brew install ollama

# Linux
curl https://ollama.ai/install.sh | sh

# Windows
# è®¿é—® https://ollama.ai/download ä¸‹è½½å®‰è£…åŒ…
```

**æ­¥éª¤ 2: å¯åŠ¨ Ollama**

```bash
ollama serve
```

**æ­¥éª¤ 3: å®‰è£…æ¨¡å‹**

```bash
# å®‰è£… LLMï¼ˆé€‰æ‹©ä¸€ä¸ªï¼‰
ollama pull llama3.1      # æ¨è
ollama pull qwen2.5       # ä¸­æ–‡ä¼˜åŒ–

# å®‰è£… Embeddingï¼ˆå¿…éœ€ï¼‰
ollama pull nomic-embed-text  # æ¨è
```

**æ­¥éª¤ 4: åˆ·æ–°ç³»ç»Ÿ**

åœ¨ RAG ç³»ç»Ÿä¸­ç‚¹å‡»"åˆ·æ–°"æŒ‰é’®ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹å·²å®‰è£…çš„æ¨¡å‹ã€‚

### 4.2 æ—¥å¸¸ä½¿ç”¨

1. **æ‰“å¼€å‚æ•°è®¾ç½®é¢æ¿**
   - åœ¨ä¸»é¡µé¢ç‚¹å‡»"å±•å¼€å‚æ•°è®¾ç½®"

2. **åˆ‡æ¢åˆ°æ¨¡å‹ç®¡ç†æ ‡ç­¾**
   - ç‚¹å‡»"ğŸ”§ æ¨¡å‹ç®¡ç†"

3. **æŸ¥çœ‹çŠ¶æ€**
   - âœ… ç³»ç»Ÿå°±ç»ªï¼šå¯ä»¥æ­£å¸¸ä½¿ç”¨
   - âš ï¸ éœ€è¦å®‰è£…ï¼šç¼ºå°‘å¿…è¦æ¨¡å‹

4. **é€‰æ‹©æ¨¡å‹**
   - ç‚¹å‡»ä»»æ„å·²å®‰è£…çš„æ¨¡å‹å³å¯é€‰æ‹©
   - ç³»ç»Ÿä¼šè‡ªåŠ¨ä¿å­˜é€‰æ‹©

5. **å®‰è£…æ–°æ¨¡å‹**
   - åˆ‡æ¢åˆ°"æ¨èæ¨¡å‹"æ ‡ç­¾
   - ç‚¹å‡»"å®‰è£…"æŒ‰é’®
   - å¤åˆ¶å‘½ä»¤åˆ°ç»ˆç«¯è¿è¡Œ
   - å®Œæˆåç‚¹å‡»"åˆ·æ–°"

### 4.3 åˆ‡æ¢æ¨¡å‹

```
åœºæ™¯: æƒ³åˆ‡æ¢åˆ°å¦ä¸€ä¸ª LLM æ¨¡å‹

1. æ‰“å¼€å‚æ•°è®¾ç½®
2. ç‚¹å‡»"æ¨¡å‹é€‰æ‹©"æ ‡ç­¾
3. åœ¨ LLM æ¨¡å‹åˆ—è¡¨ä¸­ç‚¹å‡»æƒ³è¦çš„æ¨¡å‹
4. ç³»ç»Ÿè‡ªåŠ¨åˆ‡æ¢ï¼ˆæ— éœ€é‡å¯ï¼‰
```

## äº”ã€æ•…éšœæ’æŸ¥

### 5.1 Ollama æœåŠ¡æœªè¿è¡Œ

**ç—‡çŠ¶**:
```
âš ï¸ Ollama æœåŠ¡æœªè¿è¡Œ
æ— æ³•è¿æ¥åˆ° http://localhost:11434
```

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥ Ollama æ˜¯å¦å®‰è£…
ollama --version

# å¯åŠ¨æœåŠ¡
ollama serve

# æ£€æŸ¥ç«¯å£ï¼ˆåº”è¯¥çœ‹åˆ° 11434ï¼‰
netstat -an | grep 11434    # Linux/Mac
netstat -an | findstr 11434 # Windows
```

### 5.2 æœªæ£€æµ‹åˆ°æ¨¡å‹

**ç—‡çŠ¶**:
```
âš ï¸ æœªæ£€æµ‹åˆ°å·²å®‰è£…çš„æ¨¡å‹
LLM: 0 ä¸ª | Embedding: 0 ä¸ª
```

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æŸ¥çœ‹å·²å®‰è£…æ¨¡å‹
ollama list

# å¦‚æœåˆ—è¡¨ä¸ºç©ºï¼Œå®‰è£…æ¨èæ¨¡å‹
ollama pull llama3.1
ollama pull nomic-embed-text

# åˆ·æ–°ç³»ç»Ÿç•Œé¢
```

### 5.3 æ¨¡å‹åˆ†ç±»é”™è¯¯

**ç—‡çŠ¶**: æŸäº›æ¨¡å‹æ˜¾ç¤ºåœ¨é”™è¯¯çš„åˆ†ç±»ä¸­

**åŸå› **: æ¨¡å‹åç§°ä¸ç¬¦åˆæ ‡å‡†å‘½åè§„èŒƒ

**è§£å†³æ–¹æ¡ˆ**:
1. æŸ¥çœ‹ `/api/ollama/models/route.ts` ä¸­çš„åˆ†ç±»é€»è¾‘
2. å¦‚éœ€è¦ï¼Œæ‰‹åŠ¨æ·»åŠ æ¨¡å‹åç§°åˆ°åˆ†ç±»è§„åˆ™
3. é‡å¯ Next.js æœåŠ¡

### 5.4 æ— æ³•å®‰è£…æ¨¡å‹

**ç—‡çŠ¶**: `ollama pull` å‘½ä»¤å¤±è´¥

**å¸¸è§åŸå› **:
- ç½‘ç»œè¿æ¥é—®é¢˜
- ç£ç›˜ç©ºé—´ä¸è¶³
- æ¨¡å‹åç§°é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥ç½‘ç»œè¿æ¥
curl https://ollama.ai

# æ£€æŸ¥ç£ç›˜ç©ºé—´
df -h  # Linux/Mac
dir    # Windows

# æŸ¥çœ‹å¯ç”¨æ¨¡å‹
ollama list

# ä½¿ç”¨æ­£ç¡®çš„æ¨¡å‹åç§°
ollama pull llama3.1:latest
```

## å…­ã€é«˜çº§é…ç½®

### 6.1 è‡ªå®šä¹‰ Ollama åœ°å€

å¦‚æœ Ollama è¿è¡Œåœ¨éé»˜è®¤ç«¯å£ï¼š

```bash
# .env.local
OLLAMA_BASE_URL=http://localhost:11435
```

### 6.2 æ·»åŠ è‡ªå®šä¹‰æ¨¡å‹åˆ†ç±»

ç¼–è¾‘ `/api/ollama/models/route.ts`:

```typescript
const MODEL_CATEGORIES = {
  llm: {
    patterns: [
      'llama', 'mistral', 'your-custom-model',  // æ·»åŠ è¿™é‡Œ
      ...
    ]
  },
  embedding: {
    patterns: [
      'embed', 'your-custom-embed',  // æ·»åŠ è¿™é‡Œ
      ...
    ]
  }
};
```

### 6.3 æ·»åŠ æ¨èæ¨¡å‹

ç¼–è¾‘ `RECOMMENDED_MODELS` å¸¸é‡ï¼š

```typescript
const RECOMMENDED_MODELS = {
  llm: [
    ...existing models,
    {
      name: 'your-model:latest',
      displayName: 'Your Model',
      description: 'æ‚¨çš„æ¨¡å‹æè¿°',
      size: '5.0 GB',
      contextLength: 32768,
      recommended: true
    }
  ]
};
```

## ä¸ƒã€æœ€ä½³å®è·µ

### 7.1 æ¨¡å‹é€‰æ‹©å»ºè®®

**ä¸ªäººä½¿ç”¨**:
- LLM: llama3.2 (2GB, å¿«é€Ÿ)
- Embedding: nomic-embed-text (274MB)
- æ€»å¤§å°: ~2.3 GB

**ä¸“ä¸šä½¿ç”¨**:
- LLM: llama3.1 æˆ– qwen2.5:14b
- Embedding: mxbai-embed-large
- æ€»å¤§å°: ~5-6 GB

**ä¼ä¸šä½¿ç”¨**:
- LLM: llama3.1:70b æˆ– mixtral
- Embedding: bge-large æˆ– snowflake-arctic-embed
- æ€»å¤§å°: ~40+ GB

### 7.2 æ€§èƒ½ä¼˜åŒ–

**åŠ é€Ÿæ¨¡å‹åŠ è½½**:
```bash
# é¢„åŠ è½½å¸¸ç”¨æ¨¡å‹
ollama run llama3.1 "test" # é¦–æ¬¡è¿è¡Œä¼šåŠ è½½åˆ°å†…å­˜
ollama run nomic-embed-text "test"
```

**æ¸…ç†æœªä½¿ç”¨æ¨¡å‹**:
```bash
# æŸ¥çœ‹æ¨¡å‹å¤§å°
ollama list

# åˆ é™¤ä¸éœ€è¦çš„æ¨¡å‹
ollama rm model-name:tag
```

**ç›‘æ§èµ„æºä½¿ç”¨**:
```bash
# æŸ¥çœ‹ Ollama è¿›ç¨‹
ps aux | grep ollama

# æŸ¥çœ‹æ˜¾å­˜ä½¿ç”¨ï¼ˆå¦‚æœæœ‰ GPUï¼‰
nvidia-smi  # NVIDIA GPU
rocm-smi    # AMD GPU
```

### 7.3 å¤‡ä»½å’Œè¿ç§»

**å¤‡ä»½æ¨¡å‹åˆ—è¡¨**:
```bash
ollama list > models-backup.txt
```

**åœ¨æ–°æœºå™¨ä¸Šæ¢å¤**:
```bash
# é€è¡Œå®‰è£…
cat models-backup.txt | grep -v NAME | awk '{print $1}' | xargs -I {} ollama pull {}
```

## å…«ã€API å‚è€ƒ

### å®Œæ•´ API

```typescript
// GET /api/ollama/models
// è·å–æ¨¡å‹åˆ—è¡¨

// GET /api/ollama/models?action=check-ollama
// ï¼ˆå·²å¼ƒç”¨ï¼Œä½¿ç”¨é»˜è®¤ GETï¼‰

// POST /api/ollama/models
{
  "action": "pull",        // æ‹‰å–æ¨¡å‹
  "modelName": "llama3.1"
}

{
  "action": "delete",      // åˆ é™¤æ¨¡å‹
  "modelName": "llama3.1:latest"
}

{
  "action": "validate",    // éªŒè¯æ¨¡å‹
  "modelName": "llama3.1"
}
```

### è¿”å›æ•°æ®ç»“æ„

```typescript
interface ModelData {
  success: boolean;
  hasModels: boolean;
  llmModels: ModelInfo[];
  embeddingModels: ModelInfo[];
  unknownModels?: ModelInfo[];
  recommended: {
    llm: RecommendedModel[];
    embedding: RecommendedModel[];
  };
  status: {
    hasRecommendedLLM: boolean;
    hasRecommendedEmbedding: boolean;
    ready: boolean;
  };
  warnings?: string[];
  error?: string;
  code?: string;
}
```

## ä¹ã€å¸¸è§é—®é¢˜

**Q: ä¸ºä»€ä¹ˆæˆ‘çš„æ¨¡å‹æ²¡æœ‰è¢«æ£€æµ‹åˆ°ï¼Ÿ**

A: å¯èƒ½åŸå› ï¼š
1. Ollama æœåŠ¡æœªå¯åŠ¨
2. æ¨¡å‹å®‰è£…å¤±è´¥ï¼ˆæ£€æŸ¥ `ollama list`ï¼‰
3. æ¨¡å‹åç§°ä¸ç¬¦åˆåˆ†ç±»è§„åˆ™
4. ç‚¹å‡»"åˆ·æ–°"æŒ‰é’®é‡æ–°æ£€æµ‹

**Q: å¯ä»¥ä½¿ç”¨å…¶ä»– Ollama API æœåŠ¡å™¨å—ï¼Ÿ**

A: å¯ä»¥ï¼Œè®¾ç½®ç¯å¢ƒå˜é‡ `OLLAMA_BASE_URL`

**Q: æ¨¡å‹å®‰è£…éœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿ**

A: å–å†³äºç½‘ç»œé€Ÿåº¦å’Œæ¨¡å‹å¤§å°ï¼š
- å°æ¨¡å‹ (< 1GB): 2-5 åˆ†é’Ÿ
- ä¸­æ¨¡å‹ (2-5GB): 10-20 åˆ†é’Ÿ
- å¤§æ¨¡å‹ (> 10GB): 30-60 åˆ†é’Ÿ

**Q: å¯ä»¥åŒæ—¶ä½¿ç”¨å¤šä¸ªæ¨¡å‹å—ï¼Ÿ**

A: å¯ä»¥ï¼Œä½†ä¼šå ç”¨æ›´å¤šå†…å­˜ã€‚å»ºè®®ï¼š
- < 16GB RAM: 1-2 ä¸ªæ¨¡å‹
- 16-32GB RAM: 3-4 ä¸ªæ¨¡å‹
- > 32GB RAM: 5+ ä¸ªæ¨¡å‹

**Q: å¦‚ä½•çŸ¥é“å“ªä¸ªæ¨¡å‹æ›´å¥½ï¼Ÿ**

A: æŸ¥çœ‹æ¨èåˆ—è¡¨ä¸­çš„ â­ è¯„çº§ï¼Œæˆ–ï¼š
1. æŠ€æœ¯æ–‡æ¡£/åšå®¢æ€§èƒ½æµ‹è¯•
2. å®é™…ä½¿ç”¨æ•ˆæœ
3. ç¤¾åŒºåé¦ˆ

---

**ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2026-01-14  
**ç›¸å…³æ–‡æ¡£**: 
- [RAG ç³»ç»Ÿæ–‡æ¡£](./README.md)
- [é¢†åŸŸå‘é‡æŒ‡å—](./DOMAIN_VECTORS_GUIDE.md)
- [æ„å›¾è’¸é¦æŒ‡å—](./INTENT_DISTILLATION_GUIDE.md)
