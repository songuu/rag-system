# Milvus RAG Pipeline å®Œæ•´æŒ‡å—

> æœ€åæ›´æ–°: 2026-01-15

## ğŸ¯ æ¦‚è¿°

æœ¬ç³»ç»Ÿå®ç°äº†å®Œæ•´çš„ RAG (æ£€ç´¢å¢å¼ºç”Ÿæˆ) ç®¡é“ï¼Œæ”¯æŒå¤šç§æ•°æ®æºè¾“å…¥ï¼Œé€šè¿‡ Milvus å‘é‡æ•°æ®åº“è¿›è¡Œé«˜æ•ˆçš„å‘é‡å­˜å‚¨å’Œæ£€ç´¢ã€‚

### âœ¨ æ ¸å¿ƒç‰¹æ€§

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| ğŸ”„ **è‡ªåŠ¨ç»´åº¦é€‚é…** | æ ¹æ®é›†åˆç»´åº¦è‡ªåŠ¨é€‰æ‹©åŒ¹é…çš„ Embedding æ¨¡å‹ |
| ğŸ¨ **å‘é‡ç©ºé—´å¯è§†åŒ–** | æŸ¥è¯¢è·¯å¾„ã€ç›¸ä¼¼åº¦åˆ†å¸ƒã€2D æ•£ç‚¹å›¾ |
| ğŸ§  **å¤šæ¨¡å‹æ”¯æŒ** | nomic-embed-text (768D), mxbai-embed-large (1024D) ç­‰ |
| ğŸ“Š **å®æ—¶ç»Ÿè®¡** | ç›¸ä¼¼åº¦åˆ†å¸ƒç»Ÿè®¡ã€å‡å€¼/ä¸­ä½æ•°/æå€¼ |

### ğŸ›¡ï¸ ç»´åº¦ä¸åŒ¹é…è‡ªåŠ¨å¤„ç†

ç³»ç»Ÿä¼š**è‡ªåŠ¨æ£€æµ‹**é›†åˆçš„å‘é‡ç»´åº¦å¹¶é€‰æ‹©åŒ¹é…çš„æ¨¡å‹ï¼š

```
é›†åˆç»´åº¦: 768  â†’ è‡ªåŠ¨ä½¿ç”¨: nomic-embed-text
é›†åˆç»´åº¦: 1024 â†’ è‡ªåŠ¨ä½¿ç”¨: mxbai-embed-large
```

å¦‚æœç”¨æˆ·é€‰æ‹©çš„æ¨¡å‹ç»´åº¦ä¸é›†åˆä¸åŒ¹é…ï¼Œç³»ç»Ÿä¼š**è‡ªåŠ¨åˆ‡æ¢**åˆ°æ­£ç¡®çš„æ¨¡å‹ï¼Œç¡®ä¿æœç´¢æ­£å¸¸å·¥ä½œã€‚

## ğŸ”„ Pipeline æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              RAG Pipeline å®Œæ•´æµç¨‹                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚   ğŸ“ æ•°æ®æº                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚  ğŸ“„    â”‚  â”‚  ğŸ“•    â”‚  â”‚  ğŸ“˜    â”‚  â”‚  ğŸŒ    â”‚  â”‚  ğŸ“º    â”‚  â”‚  ğŸ“    â”‚      â”‚
â”‚   â”‚ .txt   â”‚  â”‚ .pdf   â”‚  â”‚ .docx  â”‚  â”‚  URL   â”‚  â”‚YouTube â”‚  â”‚  Raw   â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜      â”‚
â”‚        â”‚           â”‚           â”‚           â”‚           â”‚           â”‚           â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                      â”‚                                          â”‚
â”‚                                      â–¼                                          â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚                          â”‚      ğŸ“¥ Loader      â”‚                               â”‚
â”‚                          â”‚   (æ–‡æ¡£åŠ è½½å™¨)       â”‚                               â”‚
â”‚                          â”‚  - loadTextFile()   â”‚                               â”‚
â”‚                          â”‚  - loadPdfFile()    â”‚                               â”‚
â”‚                          â”‚  - loadDocxFile()   â”‚                               â”‚
â”‚                          â”‚  - loadUrl()        â”‚                               â”‚
â”‚                          â”‚  - loadYouTube()    â”‚                               â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚                                     â”‚                                          â”‚
â”‚                                     â–¼ Documents                                â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚                          â”‚   âœ‚ï¸ TextSplitter   â”‚                               â”‚
â”‚                          â”‚   (æ–‡æœ¬åˆ†å‰²å™¨)       â”‚                               â”‚
â”‚                          â”‚  ChunkSize: 500     â”‚                               â”‚
â”‚                          â”‚  Overlap: 50        â”‚                               â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚                                     â”‚                                          â”‚
â”‚                                     â–¼ Chunks                                   â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚                          â”‚   ğŸ§  åµŒå…¥æ¨¡å‹        â”‚                               â”‚
â”‚                          â”‚  (Ollama Embedding) â”‚                               â”‚
â”‚                          â”‚  nomic-embed-text   â”‚                               â”‚
â”‚                          â”‚  ç»´åº¦: 768          â”‚                               â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚                                     â”‚                                          â”‚
â”‚                                     â–¼ å‘é‡                                     â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚                          â”‚   ğŸ—„ï¸ Milvus         â”‚                               â”‚
â”‚                          â”‚   (å‘é‡æ•°æ®åº“)       â”‚                               â”‚
â”‚                          â”‚  IVF_FLAT ç´¢å¼•      â”‚                               â”‚
â”‚                          â”‚  COSINE åº¦é‡        â”‚                               â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         RAG ç³»ç»Ÿ                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   ç”¨æˆ·æŸ¥è¯¢                                                      â”‚
â”‚      â”‚                                                          â”‚
â”‚      â–¼                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚   â”‚  Ollama         â”‚     â”‚   å‘é‡å­˜å‚¨      â”‚                  â”‚
â”‚   â”‚  Embedding      â”‚â”€â”€â”€â”€â–¶â”‚   é€‰æ‹©å™¨        â”‚                  â”‚
â”‚   â”‚  (nomic-embed)  â”‚     â”‚                 â”‚                  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                    â”‚                            â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚            â”‚                       â”‚                       â”‚   â”‚
â”‚            â–¼                       â–¼                       â–¼   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚  å†…å­˜å‘é‡å­˜å‚¨   â”‚   â”‚    Milvus       â”‚   â”‚  å…¶ä»–å­˜å‚¨   â”‚ â”‚
â”‚   â”‚  (SimpleMemory) â”‚   â”‚  å‘é‡æ•°æ®åº“     â”‚   â”‚  (æ‰©å±•...)  â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚            â”‚                       â”‚                       â”‚   â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â”‚                            â”‚
â”‚                                    â–¼                            â”‚
â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚                        â”‚   æœç´¢ç»“æœ      â”‚                     â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£… Milvus

#### æ–¹å¼ä¸€ï¼šDocker Composeï¼ˆæ¨èï¼‰

```bash
# ä¸‹è½½ docker-compose.yml
wget https://github.com/milvus-io/milvus/releases/download/v2.3.0/milvus-standalone-docker-compose.yml -O docker-compose.yml

# å¯åŠ¨ Milvus
docker-compose up -d

# æ£€æŸ¥çŠ¶æ€
docker-compose ps
```

#### æ–¹å¼äºŒï¼šDocker å•å®¹å™¨

```bash
# å¯åŠ¨ Milvus Standalone
docker run -d \
  --name milvus-standalone \
  -p 19530:19530 \
  -p 9091:9091 \
  milvusdb/milvus:v2.3-latest \
  milvus run standalone
```

#### æ–¹å¼ä¸‰ï¼šMilvus Liteï¼ˆå¼€å‘ç¯å¢ƒï¼‰

```bash
# åœ¨ Python ç¯å¢ƒä¸­å®‰è£…
pip install milvus

# Milvus Lite ä¼šè‡ªåŠ¨åµŒå…¥è¿è¡Œ
```

### 2. éªŒè¯å®‰è£…

```bash
# æ£€æŸ¥ç«¯å£
curl http://localhost:9091/healthz

# åº”è¯¥è¿”å› "OK"
```

### 3. é…ç½®ç¯å¢ƒå˜é‡

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºæˆ–ç¼–è¾‘ `.env.local`ï¼š

```env
# Milvus é…ç½®
MILVUS_ADDRESS=localhost:19530
MILVUS_USERNAME=
MILVUS_PASSWORD=
MILVUS_DATABASE=default
MILVUS_COLLECTION=rag_documents

# Ollama é…ç½®
OLLAMA_BASE_URL=http://localhost:11434
EMBEDDING_MODEL=nomic-embed-text
```

### 4. è®¿é—®ç®¡ç†ç•Œé¢

è®¿é—® `http://localhost:3000/milvus` è¿›å…¥ Milvus ç®¡ç†ç•Œé¢

## ğŸ“Š ç®¡ç†ç•Œé¢åŠŸèƒ½

### çŠ¶æ€é¡µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”Œ è¿æ¥çŠ¶æ€                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ çŠ¶æ€     â”‚  â”‚ æ–‡æ¡£æ•°é‡ â”‚  â”‚ å‘é‡ç»´åº¦ â”‚  â”‚ ç´¢å¼•ç±»å‹ â”‚       â”‚
â”‚  â”‚ å·²è¿æ¥ âœ“ â”‚  â”‚ 1,234    â”‚  â”‚ 768      â”‚  â”‚ IVF_FLAT â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                 â”‚
â”‚  [è¿æ¥ Milvus]  [åˆ·æ–°çŠ¶æ€]  [æ¸…ç©ºé›†åˆ]                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æœç´¢é¡µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” å‘é‡æœç´¢                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ è¾“å…¥æœç´¢å†…å®¹...                            â”‚ â”‚ ğŸ” æœç´¢  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚  Top K: [5]    é˜ˆå€¼: [0.0]                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æœç´¢ç»“æœ (3)                                                   â”‚
â”‚                                                                 â”‚
â”‚  â‘  sample.txt              95.23%                               â”‚
â”‚     æ–‡æ¡£å†…å®¹é¢„è§ˆ...                                              â”‚
â”‚                                                                 â”‚
â”‚  â‘¡ sample2.txt             82.15%                               â”‚
â”‚     æ–‡æ¡£å†…å®¹é¢„è§ˆ...                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¯¼å…¥é¡µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“¥ å¯¼å…¥æ–‡æ¡£                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  ç²˜è´´è¦å¯¼å…¥çš„æ–‡æœ¬å†…å®¹...                                â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  å­—ç¬¦æ•°: 1,234                    [æ¸…ç©º]  [ğŸ“¥ å¯¼å…¥åˆ° Milvus]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é…ç½®é¡µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš™ï¸ è¿æ¥é…ç½®                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Milvus åœ°å€                    é›†åˆåç§°                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ localhost:19530    â”‚        â”‚ rag_documents      â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                 â”‚
â”‚  ç´¢å¼•ç±»å‹                        åº¦é‡ç±»å‹                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ IVF_FLAT (æ¨è) â–¼  â”‚        â”‚ COSINE         â–¼  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                 â”‚
â”‚  [åº”ç”¨é…ç½®å¹¶è¿æ¥]                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¡ API æ¥å£

### POST /api/milvus

#### è¿æ¥

```typescript
// è¯·æ±‚
{
  "action": "connect",
  "config": {
    "address": "localhost:19530",
    "collectionName": "my_collection",
    "indexType": "IVF_FLAT",
    "metricType": "COSINE"
  }
}

// å“åº”
{
  "success": true,
  "message": "Connected to Milvus",
  "stats": {
    "name": "my_collection",
    "rowCount": 1234,
    "embeddingDimension": 768,
    "indexType": "IVF_FLAT",
    "metricType": "COSINE",
    "loaded": true
  }
}
```

#### æœç´¢

```typescript
// è¯·æ±‚
{
  "action": "search",
  "query": "æœºå™¨å­¦ä¹ æ˜¯ä»€ä¹ˆï¼Ÿ",
  "topK": 5,
  "threshold": 0.5
}

// å“åº”
{
  "success": true,
  "query": "æœºå™¨å­¦ä¹ æ˜¯ä»€ä¹ˆï¼Ÿ",
  "results": [
    {
      "id": "doc-001",
      "content": "æœºå™¨å­¦ä¹ æ˜¯äººå·¥æ™ºèƒ½çš„ä¸€ä¸ªåˆ†æ”¯...",
      "metadata": { "source": "ai_intro.txt" },
      "score": 0.9523,
      "distance": 0.0477
    }
  ],
  "count": 5
}
```

#### æ’å…¥æ–‡æ¡£

```typescript
// è¯·æ±‚
{
  "action": "insert",
  "documents": [
    {
      "content": "æ–‡æ¡£å†…å®¹...",
      "metadata": { "source": "file.txt" }
    }
  ]
}

// å“åº”
{
  "success": true,
  "message": "Inserted 1 documents",
  "ids": ["uuid-xxx"]
}
```

#### å¯¼å…¥æ–‡ä»¶

```typescript
// è¯·æ±‚
{
  "action": "import-files",
  "files": [
    {
      "filename": "document.txt",
      "content": "å®Œæ•´æ–‡ä»¶å†…å®¹..."
    }
  ]
}

// å“åº”
{
  "success": true,
  "message": "Imported 1 files as 15 chunks",
  "files": ["document.txt"],
  "chunkCount": 15
}
```

### GET /api/milvus

#### è·å–çŠ¶æ€

```typescript
// è¯·æ±‚
GET /api/milvus?action=status

// å“åº”
{
  "success": true,
  "connected": true,
  "health": { "healthy": true, "message": "Milvus is healthy" },
  "stats": { ... },
  "config": { ... }
}
```

## ğŸ”§ ç´¢å¼•ç±»å‹è¯¦è§£

### FLAT

- **åŸç†**: æš´åŠ›æœç´¢ï¼Œé€ä¸€æ¯”è¾ƒ
- **å‡†ç¡®ç‡**: 100%
- **é€Ÿåº¦**: æ…¢
- **é€‚ç”¨åœºæ™¯**: å°æ•°æ®é›† (<10K)

### IVF_FLAT â­ æ¨è

- **åŸç†**: å€’æ’æ–‡ä»¶ç´¢å¼•
- **å‡†ç¡®ç‡**: é«˜ (~95%)
- **é€Ÿåº¦**: å¿«
- **é€‚ç”¨åœºæ™¯**: ä¸­ç­‰æ•°æ®é›† (10K-1M)

### IVF_SQ8

- **åŸç†**: å€’æ’ç´¢å¼• + æ ‡é‡é‡åŒ–
- **å‡†ç¡®ç‡**: ä¸­é«˜ (~90%)
- **é€Ÿåº¦**: å¾ˆå¿«
- **é€‚ç”¨åœºæ™¯**: å¤§æ•°æ®é›†ï¼Œå†…å­˜å—é™

### IVF_PQ

- **åŸç†**: å€’æ’ç´¢å¼• + ä¹˜ç§¯é‡åŒ–
- **å‡†ç¡®ç‡**: ä¸­ (~80%)
- **é€Ÿåº¦**: æœ€å¿«
- **é€‚ç”¨åœºæ™¯**: è¶…å¤§æ•°æ®é›† (>10M)

### HNSW

- **åŸç†**: åˆ†å±‚å¯å¯¼èˆªå°ä¸–ç•Œå›¾
- **å‡†ç¡®ç‡**: é«˜ (~95%)
- **é€Ÿåº¦**: å¾ˆå¿«
- **é€‚ç”¨åœºæ™¯**: å¤§æ•°æ®é›†ï¼Œé«˜æ€§èƒ½éœ€æ±‚

## ğŸ“ˆ åº¦é‡ç±»å‹

### COSINEï¼ˆæ¨èï¼‰

- **å…¬å¼**: `1 - (AÂ·B) / (|A||B|)`
- **èŒƒå›´**: [0, 2]
- **ç‰¹ç‚¹**: æ–¹å‘æ•æ„Ÿï¼Œé•¿åº¦æ— å…³
- **é€‚ç”¨**: æ–‡æœ¬ç›¸ä¼¼åº¦

### L2

- **å…¬å¼**: `sqrt(Î£(Ai-Bi)Â²)`
- **èŒƒå›´**: [0, âˆ)
- **ç‰¹ç‚¹**: ç»å¯¹è·ç¦»
- **é€‚ç”¨**: å›¾åƒã€ç©ºé—´æ•°æ®

### IP

- **å…¬å¼**: `AÂ·B`
- **èŒƒå›´**: (-âˆ, âˆ)
- **ç‰¹ç‚¹**: å†…ç§¯ï¼Œæ–¹å‘å’Œé•¿åº¦éƒ½æ•æ„Ÿ
- **é€‚ç”¨**: æ¨èç³»ç»Ÿ

## ğŸ—ï¸ é›†åˆ Schema

```typescript
// è‡ªåŠ¨åˆ›å»ºçš„ Schema
{
  collection_name: "rag_documents",
  fields: [
    { name: "id", data_type: "VarChar", is_primary_key: true, max_length: 256 },
    { name: "content", data_type: "VarChar", max_length: 65535 },
    { name: "embedding", data_type: "FloatVector", dim: 768 },
    { name: "source", data_type: "VarChar", max_length: 1024 },
    { name: "metadata_json", data_type: "VarChar", max_length: 65535 },
    { name: "created_at", data_type: "Int64" }
  ]
}
```

## ğŸ”„ ä¸å†…å­˜å­˜å‚¨çš„å¯¹æ¯”

| ç‰¹æ€§ | å†…å­˜å­˜å‚¨ | Milvus |
|------|---------|--------|
| **æŒä¹…åŒ–** | âŒ é‡å¯ä¸¢å¤± | âœ… æŒä¹…å­˜å‚¨ |
| **æ€§èƒ½** | å¿« (å°æ•°æ®) | æ›´å¿« (å¤§æ•°æ®) |
| **æ‰©å±•æ€§** | å—å†…å­˜é™åˆ¶ | æ°´å¹³æ‰©å±• |
| **ç´¢å¼•** | æ—  | å¤šç§é«˜æ•ˆç´¢å¼• |
| **è¿‡æ»¤** | åŸºç¡€ | æ ‡é‡è¿‡æ»¤ |
| **é€‚ç”¨åœºæ™¯** | å¼€å‘/æ¼”ç¤º | ç”Ÿäº§ç¯å¢ƒ |

## ğŸ“‹ æœ€ä½³å®è·µ

### 1. é€‰æ‹©åˆé€‚çš„ç´¢å¼•

```
æ•°æ®é‡ < 10K        â†’ FLAT
10K < æ•°æ®é‡ < 1M   â†’ IVF_FLAT â­
æ•°æ®é‡ > 1M         â†’ HNSW
å†…å­˜å—é™            â†’ IVF_PQ
```

### 2. è°ƒä¼˜æœç´¢å‚æ•°

```typescript
// IVF_FLAT æœç´¢å‚æ•°
{
  nprobe: 16  // æœç´¢çš„ç°‡æ•°ï¼Œè¶Šå¤§è¶Šå‡†ç¡®ä½†è¶Šæ…¢
}

// HNSW æœç´¢å‚æ•°
{
  ef: 64  // æœç´¢æ—¶çš„åŠ¨æ€åˆ—è¡¨å¤§å°
}
```

### 3. æ‰¹é‡æ’å…¥

```typescript
// âŒ ä¸æ¨èï¼šé€æ¡æ’å…¥
for (const doc of documents) {
  await milvus.insertDocuments([doc]);
}

// âœ… æ¨èï¼šæ‰¹é‡æ’å…¥
await milvus.insertDocuments(documents);
```

### 4. ä½¿ç”¨è¿‡æ»¤å™¨

```typescript
// æŒ‰æ¥æºè¿‡æ»¤
await milvus.search(embedding, 5, 0.5, 'source == "important.txt"');

// æŒ‰æ—¶é—´è¿‡æ»¤
await milvus.search(embedding, 5, 0.5, 'created_at > 1700000000000');
```

## ğŸ”’ å®‰å…¨é…ç½®

### å¯ç”¨è®¤è¯

```env
MILVUS_USERNAME=root
MILVUS_PASSWORD=your_password
```

### å¯ç”¨ SSL/TLS

```env
MILVUS_SSL=true
```

## ğŸ› æ•…éšœæ’æŸ¥

### è¿æ¥å¤±è´¥

```bash
# æ£€æŸ¥ Milvus æ˜¯å¦è¿è¡Œ
docker ps | grep milvus

# æ£€æŸ¥ç«¯å£
netstat -an | grep 19530

# æ£€æŸ¥å¥åº·çŠ¶æ€
curl http://localhost:9091/healthz
```

### æœç´¢æ— ç»“æœ

1. ç¡®è®¤é›†åˆä¸­æœ‰æ•°æ®
2. æ£€æŸ¥ç›¸ä¼¼åº¦é˜ˆå€¼æ˜¯å¦è¿‡é«˜
3. ç¡®è®¤ embedding ç»´åº¦åŒ¹é…

### æ€§èƒ½é—®é¢˜

1. ç¡®è®¤ç´¢å¼•å·²åˆ›å»ºå¹¶åŠ è½½
2. è°ƒæ•´ `nprobe` æˆ– `ef` å‚æ•°
3. è€ƒè™‘ä½¿ç”¨æ›´é«˜æ•ˆçš„ç´¢å¼•ç±»å‹

## ğŸ“š ç›¸å…³èµ„æº

- [Milvus å®˜æ–¹æ–‡æ¡£](https://milvus.io/docs)
- [Milvus GitHub](https://github.com/milvus-io/milvus)
- [Milvus Python SDK](https://github.com/milvus-io/pymilvus)
- [Milvus Node.js SDK](https://github.com/milvus-io/milvus-sdk-node)

## ğŸ“¥ Document Pipeline API

### POST /api/pipeline

#### å¤„ç†æ–‡æœ¬
```typescript
{
  "action": "process-text",
  "text": "è¦å¤„ç†çš„æ–‡æœ¬å†…å®¹...",
  "source": "my-document",
  "chunkSize": 500,
  "chunkOverlap": 50
}
```

#### å¤„ç† URL
```typescript
{
  "action": "process-url",
  "url": "https://example.com/article",
  "chunkSize": 500,
  "chunkOverlap": 50
}
```

#### å¤„ç† YouTube
```typescript
{
  "action": "process-youtube",
  "videoUrl": "https://www.youtube.com/watch?v=xxx",
  "chunkSize": 500,
  "chunkOverlap": 50
}
```

#### é¢„è§ˆåˆ†å—
```typescript
{
  "action": "preview-chunks",
  "text": "æ–‡æœ¬å†…å®¹...",
  "chunkSize": 500,
  "chunkOverlap": 50
}
```

#### æ‰¹é‡å¤„ç†
```typescript
{
  "action": "batch-process",
  "items": [
    { "content": "æ–‡æœ¬1", "type": "text", "filename": "doc1.txt" },
    { "url": "https://...", "type": "url" }
  ],
  "chunkSize": 500,
  "chunkOverlap": 50
}
```

### æ–‡ä»¶ä¸Šä¼ 

```bash
curl -X POST http://localhost:3000/api/pipeline \
  -F "files=@document.pdf" \
  -F "files=@notes.txt" \
  -F "chunkSize=500" \
  -F "chunkOverlap=50"
```

## ğŸ”§ Document Pipeline æ¨¡å—

### æ ¸å¿ƒç»„ä»¶

```typescript
// æ–‡æ¡£åŠ è½½å™¨
loadTextFile(content, filename)    // çº¯æ–‡æœ¬
loadPdfFile(buffer, filename)      // PDF æ–‡ä»¶
loadDocxFile(buffer, filename)     // Word æ–‡ä»¶
loadUrl(url)                       // ç½‘é¡µ URL
loadYouTube(videoUrl)             // YouTube å­—å¹•

// æ–‡æœ¬åˆ†å‰²å™¨
splitDocument(document, { chunkSize, chunkOverlap })

// åµŒå…¥ç”Ÿæˆ
generateEmbeddings(chunks, { embeddingModel, ollamaBaseUrl })

// å‘é‡å­˜å‚¨
storeToMilvus(documents, { address, collectionName })
```

### ä½¿ç”¨ç¤ºä¾‹

```typescript
import { DocumentPipeline } from '@/lib/document-pipeline';

// åˆ›å»ºç®¡é“
const pipeline = new DocumentPipeline({
  chunkSize: 500,
  chunkOverlap: 50,
  embeddingModel: 'nomic-embed-text',
  ollamaBaseUrl: 'http://localhost:11434',
  milvusConfig: {
    address: 'localhost:19530',
    collectionName: 'rag_documents',
  }
});

// å¤„ç†å•ä¸ªæ–‡æ¡£
const result = await pipeline.processDocument(
  'https://example.com/article',
  {},
  (progress) => console.log(progress)
);

// æ‰¹é‡å¤„ç†
const results = await pipeline.processDocuments([
  { input: 'text content', filename: 'doc1.txt' },
  { input: buffer, type: 'pdf', filename: 'doc2.pdf' },
  { input: 'https://example.com', type: 'url' },
]);
```

## ğŸ“Š æ”¯æŒçš„æ•°æ®æº

| ç±»å‹ | æ‰©å±•å | è¯´æ˜ | ç¤ºä¾‹ |
|------|--------|------|------|
| text | .txt | çº¯æ–‡æœ¬æ–‡ä»¶ | æ–‡æ¡£ã€ç¬”è®° |
| pdf | .pdf | PDF æ–‡æ¡£ | è®ºæ–‡ã€æŠ¥å‘Š |
| docx | .docx | Word æ–‡æ¡£ | æ–‡æ¡£ã€æŠ¥å‘Š |
| url | - | ç½‘é¡µé“¾æ¥ | æ–‡ç« ã€åšå®¢ |
| youtube | - | è§†é¢‘é“¾æ¥ | æ•™ç¨‹ã€æ¼”è®² |
| raw | - | åŸå§‹æ–‡æœ¬ | ç²˜è´´å†…å®¹ |

## ğŸ¯ Milvus RAG System

### ä½¿ç”¨æ–¹å¼

```typescript
import { getMilvusRAGSystem } from '@/lib/rag-milvus';

// è·å– RAG ç³»ç»Ÿ
const rag = await getMilvusRAGSystem({
  ollamaBaseUrl: 'http://localhost:11434',
  llmModel: 'llama3.1',
  embeddingModel: 'nomic-embed-text',
  storageBackend: 'milvus',
  milvusConfig: {
    address: 'localhost:19530',
    collectionName: 'rag_documents',
  },
});

// æ·»åŠ æ–‡æ¡£
await rag.addDocuments([
  { content: 'æ–‡æ¡£å†…å®¹1', metadata: { source: 'doc1.txt' } },
  { content: 'æ–‡æ¡£å†…å®¹2', metadata: { source: 'doc2.txt' } },
]);

// æœç´¢
const results = await rag.search('æŸ¥è¯¢å†…å®¹', 5, 0.3);

// æé—®
const answer = await rag.ask('ä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ ?', { topK: 5, threshold: 0.3 });
console.log(answer.answer);
console.log(answer.sources);
```

### RAG-Milvus API

```typescript
// POST /api/rag-milvus
// æé—®
{
  "action": "ask",
  "question": "ä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ ?",
  "topK": 5,
  "threshold": 0.3
}

// æœç´¢
{
  "action": "search",
  "query": "æœºå™¨å­¦ä¹ ",
  "topK": 5
}

// æ·»åŠ æ–‡æ¡£
{
  "action": "add-documents",
  "documents": [
    { "content": "å†…å®¹...", "metadata": { "source": "xxx" } }
  ]
}
```

---

## ğŸ¨ å¯è§†åŒ–åŠŸèƒ½

### è®¿é—®æ–¹å¼

åœ¨ Milvus ç®¡ç†é¡µé¢ (`/milvus`) ä¸­ï¼Œç‚¹å‡» **ğŸ¨ å¯è§†åŒ–** æ ‡ç­¾é¡µã€‚

### åŠŸèƒ½æ¨¡å—

#### 1. ğŸ¯ æŸ¥è¯¢è·¯å¾„å¯è§†åŒ–

å±•ç¤ºæŸ¥è¯¢å‘é‡ä¸æ£€ç´¢ç»“æœçš„ç©ºé—´å…³ç³»ï¼š

```
                    Query
                      â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚         â”‚         â”‚
          Doc1      Doc2      Doc3
          85%       72%       58%

- ä¸­å¿ƒç‚¹: æŸ¥è¯¢å‘é‡
- å‘¨å›´ç‚¹: åŒ¹é…çš„æ–‡æ¡£
- è¿çº¿ç²—ç»†: è¡¨ç¤ºç›¸ä¼¼åº¦
- ç‚¹å‡»èŠ‚ç‚¹: æŸ¥çœ‹æ–‡æ¡£è¯¦æƒ…
```

#### 2. ğŸ“Š ç›¸ä¼¼åº¦åˆ†å¸ƒ

ç»Ÿè®¡ Top-K ç»“æœçš„ç›¸ä¼¼åº¦åˆ†å¸ƒï¼š

```
0.9-1.0  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  3
0.8-0.9  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘  7
0.7-0.8  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  8
0.6-0.7  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  5
0.5-0.6  â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  2

ç»Ÿè®¡ä¿¡æ¯:
- æœ€é«˜: 95.2%
- å¹³å‡: 72.4%
- ä¸­ä½æ•°: 74.1%
- æœ€ä½: 52.3%
```

#### 3. ğŸŒ å‘é‡ç©ºé—´æ¦‚è§ˆ

å°†é«˜ç»´å‘é‡æŠ•å½±åˆ° 2D ç©ºé—´ï¼Œè§‚å¯Ÿæ•°æ®åˆ†å¸ƒï¼š

- ä¸åŒé¢œè‰²ä»£è¡¨ä¸åŒçš„è¯­ä¹‰èšç±»
- ç‚¹å‡»æ•°æ®ç‚¹æŸ¥çœ‹è¯¦æƒ…
- æ”¯æŒç¼©æ”¾å’Œå¹³ç§»

### å¯è§†åŒ– API

```typescript
// POST /api/milvus/visualize
// è·å–å‘é‡ç©ºé—´æ•°æ®
{
  "action": "vector-space",
  "sampleSize": 100,
  "dimensions": 2
}

// è·å–ç›¸ä¼¼åº¦åˆ†å¸ƒ
{
  "action": "similarity-distribution",
  "query": "äººå·¥æ™ºèƒ½æŠ€æœ¯",
  "topK": 50
}

// è·å–æŸ¥è¯¢è·¯å¾„
{
  "action": "query-path",
  "query": "äººå·¥æ™ºèƒ½æŠ€æœ¯",
  "topK": 10
}

// è·å–é›†åˆä¿¡æ¯
{
  "action": "collection-info"
}
```

---

## ğŸ”§ æ•…éšœæ’æŸ¥

### é—®é¢˜: ç»´åº¦ä¸åŒ¹é…é”™è¯¯

**ç—‡çŠ¶**: 
```
vector dimension mismatch: channel=...
```

**åŸå› **: é›†åˆä¸­çš„å‘é‡ç»´åº¦ä¸æŸ¥è¯¢å‘é‡ç»´åº¦ä¸åŒã€‚

**è§£å†³æ–¹æ¡ˆ**:

1. **è‡ªåŠ¨ä¿®å¤**: ç³»ç»Ÿä¼šè‡ªåŠ¨é€‰æ‹©åŒ¹é…çš„æ¨¡å‹
2. **æ‰‹åŠ¨ä¿®å¤**: 
   - æŸ¥çœ‹é›†åˆç»´åº¦ (ä»ªè¡¨ç›˜æ˜¾ç¤º)
   - é€‰æ‹©åŒ¹é…çš„æ¨¡å‹:
     - 768 ç»´ â†’ `nomic-embed-text`
     - 1024 ç»´ â†’ `mxbai-embed-large`
3. **æ¸…ç©ºé‡å»º**: å¦‚æœéœ€è¦ä½¿ç”¨æ–°æ¨¡å‹ï¼Œæ¸…ç©ºé›†åˆåé‡æ–°å¯¼å…¥

### é—®é¢˜: è¿æ¥å¤±è´¥

**ç—‡çŠ¶**: Milvus æœåŠ¡ä¸å¯ç”¨

**è§£å†³æ–¹æ¡ˆ**:

1. æ£€æŸ¥ Milvus æ˜¯å¦è¿è¡Œ: `docker ps | grep milvus`
2. æ£€æŸ¥ç«¯å£: `curl localhost:19530`
3. é‡å¯æœåŠ¡: `docker-compose restart milvus`

### é—®é¢˜: æœç´¢ç»“æœè´¨é‡å·®

**å»ºè®®**:

1. æ£€æŸ¥ç›¸ä¼¼åº¦åˆ†å¸ƒ (å¯è§†åŒ–æ ‡ç­¾)
2. è°ƒæ•´é˜ˆå€¼å‚æ•°
3. æ£€æŸ¥æ–‡æ¡£åˆ†å—å¤§å°
4. å°è¯•ä¸åŒçš„ Embedding æ¨¡å‹

---

**ç‰ˆæœ¬**: v3.0  
**æœ€åæ›´æ–°**: 2026-01-15  
**çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª

**æ–°å¢åŠŸèƒ½**:
- âœ… è‡ªåŠ¨ç»´åº¦é€‚é…
- âœ… æŸ¥è¯¢è·¯å¾„å¯è§†åŒ–
- âœ… ç›¸ä¼¼åº¦åˆ†å¸ƒç»Ÿè®¡
- âœ… å‘é‡ç©ºé—´ 2D æ¦‚è§ˆ
